# Red black tree

## 参考

1. **Algorithms fourth edition** **3.3.2节 红黑二叉查找树**

	- 参考解答: https://algs4.cs.princeton.edu/33balanced/

2. 2008年 Sedgewick 的论文 [Left-leaning Red-Black Trees](https://open-chen.oss-cn-hangzhou.aliyuncs.com/open/pdf/datastructure/LLRB.pdf)

## 导读

曾经, 我看到的红黑树, 上来就是

```
红黑树的性质
1）每个结点要么是红的，要么是黑的。
2）根结点是黑的。
3）每个叶结点（叶结点即指树尾端NIL指针或NULL结点）是黑的。
4）如果一个结点是红的，那么它的俩个儿子都是黑的。
5）对于任一结点而言，其到叶结点树尾端NIL指针的每一条路径都包含相同数目的黑结点。
```

我看完之后, 我心里 `12#!^@^&$!*())#7&(&*%$58%%*%*&%%()*%?<)` , 哇, 完全看天书哎

然后这几天看了 `Robert Sedgewick` 的`Algorithms` ...... 挖槽, 原来是这样的

## 红黑树

红黑二叉查找树的基本思想是用 **标准的二叉查找树** 和 **一些额外信息(代替 3 -节点)**来表示 **2-3 树**

所以要看红黑树, 请 **先掌握 2-3 树**, 否则下面的就不要看啦 =.=

### 本节看完需要掌握以下的知识点

1. 旋转(左旋和右旋)
2. 向一个 2-节点插入新键, 两种情况(左插/右插)
3. 向一个 3-节点插入一个新键, 3种情况(大于/之间/小于)
4. 颜色转换
5. 根节点为黑色, 当根节点由红转黑时, 树的高度加一
6. 将红链接向上传递, 直至遇到一个 2-节点或者根节点

### 红黑树如何转为2-3树

将一颗红黑树中的红链接画平

![画图不易请注明出处 giraffetree.me](https://open-chen.oss-cn-hangzhou.aliyuncs.com/open/img/2019/May/redblacktreeTo23tree.png?x-oss-process=style/default)

## todo

画图....

1. 升序插入
2. 随机插入


### 其他知识点

#### 插入时最主要的3个操作

1. 左旋
2. 右旋
3. 变色
   - 将两个红色的子节点变黑, 将父节点变红

#### 什么时候进行旋转或者变色

现有一个节点 N

1. 若 N 的右节点为红色, 且 N 的左节点为黑色, 则进行 **左旋**
2. 若 N 的左节点 S 为 红色, 且 S 的左节点也为红色, 则进行 **右旋**
3. 若 N 的左右节点均为 红色, 则进行颜色转换

#### 删除最小键如何借节点

1. 如果当前节点的左子节点不是 2-节点, 则进入左子节点
2. 如果当前节点的左子节点是 2-节点, 且它的右子节点不是 2-节点, 则借一个节点到左子节点中
3. 如果当前节点的左右子节点均为 2-节点, 则将当前节点/其左子节点/其右子节点合并成一个 4-节点(即一个黑色节点的左右子节点均为红色)

什么时候删除呢?

当最后得到一个含有最小键的 3-节点或者4-节点, 将其删除, 然后递归向上平衡(类似于插入后的情形)

> 所谓的三节点就是: 一个节点的左子节点为红色, 右子节点有黑色
> 所谓的四节点就是: 一个节点的左右子节点均为红色
